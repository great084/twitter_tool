
<h1><%= @user.nickname%>さんのtweet一覧</h1>
<%# 検索ボックス %>
<%= search_form_for @q do |f| %>
<div>
  <%= f.label :tweet_flag %>
  <%= f.radio_button :tweet_flag_eq, '', {:checked => true} %>指定なし
  <%= f.radio_button :tweet_flag_eq, true %>含める
  <%= f.radio_button :tweet_flag_eq, false %>含めない
</div>
<div>
  <%= f.label :retweet_flag %>
  <%= f.radio_button :retweet_flag_eq, '', {:checked => true} %>指定なし
  <%= f.radio_button :retweet_flag_eq, true %>含める
  <%= f.radio_button :retweet_flag_eq, false %>含めない
</div>
<div>
  <%= f.label :tweet_created_at %>
  <%= f.radio_button :tweet_created_at_lteq, @now.ago(2.years), {:checked => true}%>2年以上前
  <%= f.radio_button :tweet_created_at_lteq,@now.prev_year %>1年以上前
  <%= f.radio_button :tweet_created_at_lteq	,@now.ago(6.month)%>半年以上前
</div>
<div>
  <%= f.label :retweet_count %>
  <%= f.number_field :retweet_count_gteq,min:"0"%>以上〜
</div>
<div>
  <%= f.label :favorite_count %>
  <%= f.number_field :favorite_count_gteq,min:"0"%>以上〜
</div>


  <%= f.submit "検索" %>
<% end %>
<%# ツイート一覧表示 %>
<table class="table table-striped text-center table_index" >
  <thead>
    <tr>
      <th scope="col "></th>
      <th scope="col ">投稿日時</th>
      <th scope="col">投稿内容</th>
      <th scope="col ">投稿画像</th>
      <th scope="col ">リツイート</th>
      <th scope="col ">いいね</th>
      <th scope="col "></th>
    </tr>
  </thead>
  <tbody >
    <%@tweets.each do |tweet|%>
      <tr>
        <%= render partial: 'flag_btn', locals: { tweet: tweet }%>
        <td ><%= l tweet.tweet_created_at, format: :short%></td>
        <td class="box-read"><%= tweet.text %></td>
        <td class="media-row" >
          <% tweet.media.each_with_index do |media,index| %>
            <% if index==0 %>
              <%= image_tag media.media_url.to_s,class: "tweet_media m-1 " %>           
            <% end %>
          <% end %>
        </td>
        <td><%= tweet.retweet_count%></td>
        <td><%= tweet.favorite_count%></td>

        <td><%= link_to "詳細", tweet,class:"btn btn-success my-auto"%></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate @tweets%>


